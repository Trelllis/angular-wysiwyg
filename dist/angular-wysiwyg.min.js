!function(){"use strict";angular.module("wysiwyg.module",["colorpicker.module"])}(),function(){"use strict";function t(t){function e(e){return t.jsonp("//api.instagram.com/oembed?url="+e+"&omitscript=true&callback=JSON_CALLBACK").then(function(t){return t.data})}function a(e){return t.jsonp("//api.twitter.com/1/statuses/oembed.json?url="+e+"&omit_script=true&lang=ar&callback=JSON_CALLBACK").then(function(t){return t.data})}return{getInstagramEmbed:e,getTwitterEmbed:a}}angular.module("wysiwyg.module").factory("socialEmbeds",t),t.$inject=["$http"]}(),function(){"use strict";function t(t,e,a,n){function i(i,r,s,o){function l(){u(),c(),d(),m()}function u(){e.setCustomElements(i.textareaCustomMenu);var t=r.children("div.wysiwyg-menu")[0];t.appendChild(e.createMenu(i.textareaMenu)),a(t)(i)}function c(){i.$watch("disabled",function(t){angular.element("div.wysiwyg-menu").find("button").each(function(){angular.element(this).attr("disabled",t)}),angular.element("div.wysiwyg-menu").find("select").each(function(){angular.element(this).attr("disabled",t)})})}function d(){"true"===s.enableBootstrapTitle&&void 0!==s.enableBootstrapTitle&&r.find("button[title]").tooltip({container:"body"})}function m(){angular.element(".wysiwyg-menu").find("button").on("click",function(){var t=angular.element(this);i.$emit("wysiwyg.click",t.attr("title")||t.attr("data-original-title"))}),b.on("input keyup mouseup focus",function(){var t=b.html();b[0].childNodes[0]&&"#text"!==b[0].childNodes[0].nodeName&&"BR"!==b[0].childNodes[0].nodeName||i.format("formatBlock","<div>"),o.$setViewValue(t)}),b.on("paste","div",function(e){t(function(){g(e.currentTarget)},200)}),b.on("keyup",function(t){13===t.keyCode&&(i.cmdState("bold")&&i.format("bold"),i.cmdState("underline")&&i.format("underline"))}),b.on("click keyup focus mouseup",function(){i.isBold=i.cmdState("bold"),i.isUnderlined=i.cmdState("underline"),i.isStrikethrough=i.cmdState("strikethrough"),i.isBlockquote="blockquote"===i.cmdValue("formatblock"),i.isOrderedList=i.cmdState("insertorderedlist"),i.isUnorderedList=i.cmdState("insertunorderedlist"),i.cmdValue("formatblock").toLowerCase(),i.formatBlocks.forEach(function(t){return i.cmdValue("formatblock").toLowerCase()===t.value.toLowerCase()?(i.formatBlock=t,!1):void 0})});var e=document.getElementById("imagesInput"),a=e.createShadowRoot();a.innerHTML="<button tabindex='-1'>Images</button>",e.addEventListener("change",f,!1)}function f(){var e=this;if(this.files&&this.files[0]){var a=new FileReader;a.onload=function(a){e.value="";var n=document.createElement("img");n.setAttribute("src",a.target.result),t(function(){if(n.naturalWidth>500){var t=document.createElement("figure"),e=document.createElement("figcaption");e.innerText="Image Caption",e.classList.add("remove_tag"),e.addEventListener("click",function(){var t=prompt("Enter Image Caption",this.innerText);this.innerText=t||"Image Caption","Image Caption"!==this.innerText&&(this.parentNode.firstChild.setAttribute("data-caption",this.innerText),this.parentNode.firstChild.setAttribute("alt",this.innerText),this.classList.remove("remove_tag"))});var a=document.createElement("span");a.innerText="Image Credits",a.classList.add("remove_tag"),t.appendChild(n),console.log(t),t.appendChild(e),t.appendChild(a),a.addEventListener("click",function(){var t=prompt("Enter Image Credits",this.innerText);this.innerText=t||"Image Credits","Image Credits"!==this.innerText&&(this.innerText=t||"Image Credits",this.parentNode.firstChild.setAttribute("data-credits",this.innerText),this.classList.remove("remove_tag"))});var r,s;r=window.getSelection(),r.getRangeAt&&r.rangeCount&&(s=r.getRangeAt(0),"DIV"!==s.startContainer.nodeName&&s.startContainer.parentNode.removeChild(s.startContainer),s.startContainer.contentEditable="false",s.startContainer.innerHTML="",s.startContainer.appendChild(t),s.startContainer.insertAdjacentHTML("afterend","<div><br></div>"),s.setStartAfter(s.startContainer),r.removeAllRanges(),r.addRange(s))}else i.$emit("editor-error",{error:"Image should be at least 500px wide"})},200)},a.readAsDataURL(this.files[0])}}function g(t,e){var a=t.outerText.replace(/\n/g,"###").split("###");t.parentNode.removeChild(t);var n,e;n=window.getSelection(),e=n.getRangeAt(0),a.forEach(function(t){if(t.length>1){var a=document.createElement("div");a.innerHTML=t,e.insertNode(a),e.setStartAfter(a)}}),n.removeAllRanges(),n.addRange(e)}var b=r.find("div.wysiwyg-textarea");i.isLink=!1,i.formatBlocks=[{name:"Heading Blocks",value:"div"},{name:"Heading 1",value:"h1"},{name:"Heading 2",value:"h2"},{name:"Heading 3",value:"h3"},{name:"Heading 4",value:"h4"},{name:"Heading 5",value:"h5"},{name:"Heading 6",value:"h6"}],i.formatBlock=i.formatBlocks[0],angular.isArray(i.cssClasses)&&(i.cssClasses.unshift("css"),i.cssClass=i.cssClasses[0]),l(),o.$render=function(){b.html(o.$viewValue)},i.format=function(t,e){document.execCommand(t,!1,e)},i.cmdState=function(t){return document.queryCommandState(t)},i.cmdValue=function(t){return document.queryCommandValue(t)},i.createLink=function(){var t=prompt("Enter the link URL");t&&void 0!==t&&i.format("createlink",t)},i.insertImage=function(){var t=prompt("Enter the image URL");t&&void 0!==t&&i.format("insertimage",t)},i.setFormatBlock=function(){i.format("formatBlock",i.formatBlock.value)},i.insertInstagram=function(){var t,e;t=window.getSelection(),e=t.getRangeAt(0),swal({title:"Instagram Embed",text:"Enter an Instagram URL:",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Instagram Url",showLoaderOnConfirm:!0},function(a){if(a===!1)return!1;var r=a.trim();if(""===r||null===r||-1===r.indexOf("instagram"))return swal.showInputError("Enter a valid Instagram Url"),!1;i.$emit("embed-instagram:start");var s=document.createElement("div");s.classList.add("instagram_embed_wrapper"),s.setAttribute("data-link",r),n.getInstagramEmbed(r).then(function(a){s.innerHTML=a.html,console.log(e),"DIV"!==e.startContainer.nodeName&&e.startContainer.parentNode.removeChild(e.startContainer),e.startContainer.contentEditable="false",e.startContainer.innerHTML="",e.startContainer.appendChild(s),e.startContainer.insertAdjacentHTML("afterend","<div><br></div>"),e.setStartAfter(e.startContainer),t.removeAllRanges(),t.addRange(e),instgrm.Embeds.process(),swal.close(),i.$emit("embed-instagram:finish")})})},i.insertTwitter=function(){var t,e;t=window.getSelection(),e=t.getRangeAt(0),swal({title:"Twitter Embed",text:"Enter a Tweet URL:",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Tweet Url",showLoaderOnConfirm:!0},function(a){if(r===!1)return!1;var r=a.trim();if(""===r||null===r||-1===r.indexOf("twitter"))return swal.showInputError("Enter a valid twitter Url"),!1;i.$emit("embed-twitter:start");var s=document.createElement("div");s.classList.add("twitter_embed_wrapper"),s.setAttribute("data-link",r),n.getTwitterEmbed(r).then(function(a){s.innerHTML=a.html,"DIV"!==e.startContainer.nodeName&&e.startContainer.parentNode.removeChild(e.startContainer),e.startContainer.contentEditable="false",e.startContainer.innerHTML="",e.startContainer.appendChild(s),e.startContainer.insertAdjacentHTML("afterend","<div><br></div>"),e.setStartAfter(e.startContainer),t.removeAllRanges(),t.addRange(e),swal.close(),i.$emit("embed-twitter:finish")})})},i.insertYoutube=function(){var t,e;t=window.getSelection(),e=t.getRangeAt(0),swal({title:"Youtube Embed",text:"Enter a Youtube URL:",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Youtube Url",showLoaderOnConfirm:!0},function(a){if(n===!1)return!1;var n=a.trim();if(""===n&&null===n&&-1===n.indexOf("youtu"))return swal.showInputError("Enter a valid twitter Url"),!1;i.$emit("embed-youtube:start");var r=n.match(/(\?|&)v=[^&]*/),s=document.createElement("div");s.setAttribute("data-link","https://www.youtube.com/embed/"+r[0].substring(3)),s.classList.add("youtube_player_wrapper"),s.innerHTML='<iframe width="560" height="315" src="https://www.youtube.com/embed/'+r[0].substring(3)+'" frameborder="0" allowfullscreen></iframe>',"DIV"!==e.startContainer.nodeName&&e.startContainer.parentNode.removeChild(e.startContainer),e.startContainer.contentEditable="false",e.startContainer.innerHTML="",e.startContainer.appendChild(s),e.startContainer.insertAdjacentHTML("afterend","<div><br></div>"),e.setStartAfter(e.startContainer),t.removeAllRanges(),t.addRange(e),swal.close(),i.$emit("embed-youtube:finish")})},i.insertFacebook=function(){var t,e;t=window.getSelection(),e=t.getRangeAt(0),swal({title:"Facebook Post Embed",text:"Enter a Facebook URL:",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Facebook Url",showLoaderOnConfirm:!0},function(a){if(n===!1)return!1;var n=a.trim();if(""===n&&null===n&&-1===n.indexOf("facebook"))return swal.showInputError("Enter a valid twitter Url"),!1;i.$emit("embed-facebook:start");var r=document.createElement("div");r.setAttribute("data-link",n),r.classList.add("facebook_embed_wrapper"),r.innerHTML='<div class="fb-post" data-href="'+n+'"></div>',"DIV"!==e.startContainer.nodeName&&e.startContainer.parentNode.removeChild(e.startContainer),e.startContainer.contentEditable="false",e.startContainer.innerHTML="",e.startContainer.appendChild(r),e.startContainer.insertAdjacentHTML("afterend","<div><br></div>"),e.setStartAfter(e.startContainer),t.removeAllRanges(),t.addRange(e),window.FB.XFBML.parse(),swal.close(),i.$emit("embed-facebook:finish")})},i.insertFacebookVideo=function(){var t,e;t=window.getSelection(),e=t.getRangeAt(0),swal({title:"Facebook Video Embed",text:"Enter a Facebook URL:",type:"input",showCancelButton:!0,closeOnConfirm:!1,animation:"slide-from-top",inputPlaceholder:"Facebook Url",showLoaderOnConfirm:!0},function(a){if(n===!1)return!1;var n=a.trim();if(""===n&&null===n&&-1===n.indexOf("facebook"))return swal.showInputError("Enter a valid twitter Url"),!1;i.$emit("embed-facebook:start");var r=document.createElement("div");r.setAttribute("data-link",n),r.classList.add("facebook_video_embed_wrapper"),r.innerHTML='<div class="fb-video" data-href="'+n+'" data-allowfullscreen="true"></div>',"DIV"!==e.startContainer.nodeName&&e.startContainer.parentNode.removeChild(e.startContainer),e.startContainer.contentEditable="false",e.startContainer.innerHTML="",e.startContainer.appendChild(r),e.startContainer.insertAdjacentHTML("afterend","<div><br></div>"),e.setStartAfter(e.startContainer),t.removeAllRanges(),t.addRange(e),window.FB.XFBML.parse(),swal.close(),i.$emit("embed-facebook:finish")})},i.format("enableobjectresizing",!0),i.format("styleWithCSS",!1)}return{template:'<div><div class="wysiwyg-menu"></div><div id="{{textareaId}}" contentEditable="{{!disabled}}" class="{{textareaClass}} wysiwyg-textarea" rows="{{textareaRows}}" name="{{textareaName}}" required="{{textareaRequired}}" placeholder="{{textareaPlaceholder}}" ng-model="value"></div></div>',restrict:"E",scope:{value:"=ngModel",textareaName:"@textareaName",textareaClass:"@textareaClass",textareaRequired:"@textareaRequired",textareaId:"@textareaId",textareaMenu:"=textareaMenu",textareaCustomMenu:"=textareaCustomMenu",fn:"&",disabled:"=?disabled"},replace:!0,require:"ngModel",link:i,transclude:!0}}angular.module("wysiwyg.module").directive("wysiwyg",t),t.$inject=["$timeout","wysiwgGui","$compile","socialEmbeds"]}(),function(){"use strict";function t(t){function a(t){var e;if(t.tag)e=document.createElement(t.tag);else{if(!t.text)return console.log("cannot create this element."),e=document.createElement("span");e=document.createElement("span")}if(t.text&&document.all?e.innerText=t.text:t.text&&(e.textContent=t.text),t.classes&&(e.className=t.classes),t.html&&(e.innerHTML=t.html),t.attributes&&t.attributes.length)for(var n in t.attributes){var i=t.attributes[n];i.name&&i.value&&e.setAttribute(i.name,i.value)}if(t.data&&t.data.length)for(var r in t.data)e.appendChild(a(t.data[r]));return e}var n=t,i={},r=function(t){i=t},s=function(){return{tag:"div",classes:"btn-group btn-group-sm wysiwyg-btn-group-margin"}},o=function(t){return n[t]||{}},l=function(t){angular.extend(n,i),t=angular.isDefined(t)&&""!==t?t:e;for(var r,l=document.createElement("div"),u=0;u<t.length;u++){for(var c=a(s()),d=0;d<t[u].length;d++)"link"===t[u][d]&&(r=a(o("unlink")),c.appendChild(r)),r=a(o(t[u][d])),c.appendChild(r);l.appendChild(c)}return l};return{createMenu:l,setCustomElements:r}}var e=[["bold","italic","underline","strikethrough","subscript","superscript"],["format-block"],["font"],["font-size"],["font-color","hilite-color"],["remove-format"],["ordered-list","unordered-list","outdent","indent"],["left-justify","center-justify","right-justify"],["code","quote","paragraph"],["link"],["images"],["instagram","twitter","youtube"]];angular.module("wysiwyg.module").factory("wysiwgGui",t),t.$inject=["wysiwgGuiElements"]}(),function(){"use strict";angular.module("wysiwyg.module").value("wysiwgGuiElements",{bold:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Bold"},{name:"ng-click",value:"format('bold')"},{name:"ng-class",value:"{ active: isBold }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-bold"}]},italic:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Italic"},{name:"ng-click",value:"format('italic')"},{name:"ng-class",value:"{ active: isItalic }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-italic"}]},underline:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Underline"},{name:"ng-click",value:"format('underline')"},{name:"ng-class",value:"{ active: isUnderlined }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-underline"}]},strikethrough:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Strikethrough"},{name:"ng-click",value:"format('strikethrough')"},{name:"ng-class",value:"{ active: isStrikethrough }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-strikethrough"}]},subscript:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Subscript"},{name:"ng-click",value:"format('subscript')"},{name:"ng-class",value:"{ active: isSubscript }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-subscript"}]},superscript:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Superscript"},{name:"ng-click",value:"format('superscript')"},{name:"ng-class",value:"{ active: isSuperscript }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-superscript"}]},"remove-format":{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Remove Formatting"},{name:"ng-click",value:"format('removeFormat')"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-eraser"}]},"ordered-list":{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Ordered List"},{name:"ng-click",value:"format('insertorderedlist')"},{name:"ng-class",value:"{ active: isOrderedList }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-list-ol"}]},"unordered-list":{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Unordered List"},{name:"ng-click",value:"format('insertunorderedlist')"},{name:"ng-class",value:"{ active: isUnorderedList }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-list-ul"}]},outdent:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Outdent"},{name:"ng-click",value:"format('outdent')"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-outdent"}]},indent:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Indent"},{name:"ng-click",value:"format('indent')"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-indent"}]},"left-justify":{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Left Justify"},{name:"ng-click",value:"format('justifyleft')"},{name:"ng-class",value:"{ active: isLeftJustified }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-align-left"}]},"center-justify":{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Center Justify"},{name:"ng-click",value:"format('justifycenter')"},{name:"ng-class",value:"{ active: isCenterJustified }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-align-center"}]},"right-justify":{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Right Justify"},{name:"ng-click",value:"format('justifyright')"},{name:"ng-class",value:"{ active: isRightJustified }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-align-right"}]},code:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Code"},{name:"ng-click",value:"format('formatblock', 'pre')"},{name:"ng-class",value:"{ active: isPre }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-code"}]},quote:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Quote"},{name:"ng-click",value:"format('formatblock', 'blockquote')"},{name:"ng-class",value:"{ active: isBlockquote }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-quote-right"}]},paragraph:{tag:"button",classes:"btn btn-default",text:"P",attributes:[{name:"title",value:"Paragragh"},{name:"ng-click",value:"format('insertParagraph')"},{name:"ng-class",value:"{ active: isParagraph }"},{name:"type",value:"button"}]},image:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Image"},{name:"ng-click",value:"insertImage()"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-picture-o"}]},"font-color":{tag:"button",classes:"btn btn-default wysiwyg-colorpicker wysiwyg-fontcolor",text:"A",attributes:[{name:"title",value:"Font Color"},{name:"colorpicker",value:"rgba"},{name:"colorpicker-position",value:"top"},{name:"ng-model",value:"fontColor"},{name:"ng-change",value:"setFontColor()"},{name:"type",value:"button"}]},"hilite-color":{tag:"button",classes:"btn btn-default wysiwyg-colorpicker wysiwyg-fontcolor",text:"H",attributes:[{name:"title",value:"Hilite Color"},{name:"colorpicker",value:"rgba"},{name:"colorpicker-position",value:"top"},{name:"ng-model",value:"hiliteColor"},{name:"ng-change",value:"setHiliteColor()"},{name:"type",value:"button"}]},font:{tag:"select",classes:"form-control wysiwyg-select",attributes:[{name:"title",value:"Image"},{name:"ng-model",value:"font"},{name:"ng-options",value:"f for f in fonts"},{name:"ng-change",value:"setFont()"}]},images:{tag:"input",classes:"images-upload-file",attributes:[{name:"title",value:""},{name:"type",value:"file"},{name:"id",value:"imagesInput"}]},"font-size":{tag:"select",classes:"form-control wysiwyg-select",attributes:[{name:"title",value:"Image"},{name:"ng-model",value:"fontSize"},{name:"ng-options",value:"f.size for f in fontSizes"},{name:"ng-change",value:"setFontSize()"}]},"format-block":{tag:"select",classes:"form-control wysiwyg-select",attributes:[{name:"title",value:"Format Block"},{name:"ng-model",value:"formatBlock"},{name:"ng-options",value:"f.name for f in formatBlocks"},{name:"ng-change",value:"setFormatBlock()"}]},link:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Link"},{name:"ng-click",value:"createLink()"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-link"}]},unlink:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Unlink"},{name:"ng-click",value:"format('unlink')"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-unlink"}]},instagram:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Instagram"},{name:"ng-click",value:"insertInstagram()"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-instagram"}]},twitter:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Twitter"},{name:"ng-click",value:"insertTwitter()"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-twitter"}]},youtube:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Youtube"},{name:"ng-click",value:"insertYoutube()"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-youtube"}]},facebook:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Facebook Post"},{name:"ng-click",value:"insertFacebook()"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-facebook"}]},"facebook-video":{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Facebook Video"},{name:"ng-click",value:"insertFacebookVideo()"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-video-camera"}]}})}();
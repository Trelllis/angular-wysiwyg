!function(){"use strict";angular.module("wysiwyg.module",["colorpicker.module"])}(),function(){"use strict";function e(e){function t(t){return e.jsonp("http://api.instagram.com/oembed?url="+t+"&omitscript=true&callback=JSON_CALLBACK").then(function(e){return e.data})}function a(t){return e.jsonp("https://api.twitter.com/1/statuses/oembed.json?url="+t+"&omit_script=true&lang=ar&callback=JSON_CALLBACK").then(function(e){return e.data})}return{getInstagramEmbed:t,getTwitterEmbed:a}}angular.module("wysiwyg.module").factory("socialEmbeds",e)}(),function(){"use strict";angular.module("wysiwyg.module").directive("wysiwyg",function(e,t,a,n){function l(l,i,s,r){function u(){o(),c(),m(),d()}function o(){t.setCustomElements(l.textareaCustomMenu);var e=i.children("div.wysiwyg-menu")[0];e.appendChild(t.createMenu(l.textareaMenu)),a(e)(l)}function c(){l.$watch("disabled",function(e){angular.element("div.wysiwyg-menu").find("button").each(function(){angular.element(this).attr("disabled",e)}),angular.element("div.wysiwyg-menu").find("select").each(function(){angular.element(this).attr("disabled",e)})})}function m(){"true"===s.enableBootstrapTitle&&void 0!==s.enableBootstrapTitle&&i.find("button[title]").tooltip({container:"body"})}function d(){angular.element(".wysiwyg-menu").find("button").on("click",function(){var e=angular.element(this);l.$emit("wysiwyg.click",e.attr("title")||e.attr("data-original-title"))}),f.on("input keyup paste mouseup focus",function(){var e=f.html();"<br>"==e&&(e=""),r.$setViewValue(e)}),f.on("keydown",function(e){if(9==e.keyCode){{var t=(f.html(),window.getSelection());t.anchorOffset}e.preventDefault()}}),e(function(){l.isBold=l.cmdState("bold"),l.isUnderlined=l.cmdState("underline"),l.isStrikethrough=l.cmdState("strikethrough"),l.isBlockquote="blockquote"===l.cmdValue("formatblock"),l.isOrderedList=l.cmdState("insertorderedlist"),l.isUnorderedList=l.cmdState("insertunorderedlist"),l.cmdValue("formatblock").toLowerCase(),l.formatBlocks.forEach(function(e){return l.cmdValue("formatblock").toLowerCase()===e.value.toLowerCase()?(l.formatBlock=e,!1):void 0})},0);var t=document.getElementById("imagesInput");t.addEventListener("change",g,!1)}function g(){if(this.files&&this.files[0]){var e=new FileReader;e.onload=function(e){var t=document.createElement("figure"),a=document.createElement("img");a.setAttribute("src",e.target.result),t.appendChild(a);var n,l;if(n=window.getSelection(),n.getRangeAt&&n.rangeCount&&(l=n.getRangeAt(0),l.insertNode(t),t.parentNode.contentEditable="false",t)){l=l.cloneRange(),l.setStartAfter(t.parentNode),l.collapse(!0);var i=document.createElement("div");i.innerHTML="<br>",l.insertNode(i),n.removeAllRanges(),n.addRange(l)}},e.readAsDataURL(this.files[0])}}var f=i.find("div.wysiwyg-textarea");l.isLink=!1,l.formatBlocks=[{name:"Heading Blocks",value:"div"},{name:"Heading 1",value:"h1"},{name:"Heading 2",value:"h2"},{name:"Heading 3",value:"h3"},{name:"Heading 4",value:"h4"},{name:"Heading 5",value:"h5"},{name:"Heading 6",value:"h6"}],l.formatBlock=l.formatBlocks[0],angular.isArray(l.cssClasses)&&(l.cssClasses.unshift("css"),l.cssClass=l.cssClasses[0]),u(),r.$render=function(){f.html(r.$viewValue)},l.format=function(e,t){document.execCommand(e,!1,t)},l.cmdState=function(e){return document.queryCommandState(e)},l.cmdValue=function(e){return document.queryCommandValue(e)},l.createLink=function(){var e=prompt("Enter the link URL");e&&void 0!==e&&l.format("createlink",e)},l.insertImage=function(){var e=prompt("Enter the image URL");e&&void 0!==e&&l.format("insertimage",e)},l.setFormatBlock=function(){l.format("formatBlock",l.formatBlock.value)},l.insertInstagram=function(){var e,t,a=prompt("Enter instagram url");if(e=window.getSelection(),""!==a&&null!==a&&e.getRangeAt&&e.rangeCount){t=e.getRangeAt(0);var l=document.createElement("div");l.classList.add("instagram_embed_wrapper"),l.setAttribute("data-link",a),n.getInstagramEmbed(a).then(function(a){if(l.innerHTML=a.html,t.insertNode(l),l.parentNode.contentEditable="false",instgrm.Embeds.process(),l){t=t.cloneRange(),t.setStartAfter(l.parentNode),t.collapse(!0);var n=document.createElement("div");n.innerHTML="<br>",t.insertNode(n),e.removeAllRanges(),e.addRange(t)}})}},l.insertTwitter=function(){var e,t,a=prompt("Enter Twitter url");if(e=window.getSelection(),""!==a&&null!==a&&e.getRangeAt&&e.rangeCount){t=e.getRangeAt(0);var l=document.createElement("div");l.classList.add("twitter_embed_wrapper"),l.setAttribute("data-link",a),n.getTwitterEmbed(a).then(function(a){if(l.innerHTML=a.html,t.insertNode(l),l.parentNode.contentEditable="false",twttr.widgets.load(),l){t=t.cloneRange(),t.setStartAfter(l.parentNode),t.collapse(!0);var n=document.createElement("div");n.innerHTML="<br>",t.insertNode(n),e.removeAllRanges(),e.addRange(t)}})}},l.insertYoutube=function(){var t,a,n=window.prompt("Enter Youtube Url");if(t=window.getSelection(),""!==n&&null!==n){var l=n.match(/(\?|&)v=[^&]*/);if(t.getRangeAt&&t.rangeCount){a=t.getRangeAt(0);var i=document.createElement("div");i.setAttribute("data-link","https://www.youtube.com/embed/"+l[0].substring(3)),i.classList.add("youtube_player_wrapper"),i.innerHTML='<iframe width="560" height="315" src="https://www.youtube.com/embed/'+l[0].substring(3)+'" frameborder="0" allowfullscreen></iframe>',a.insertNode(i),i.parentNode.contentEditable="false",e(function(){if(i){a=a.cloneRange(),a.setStartAfter(i.parentNode),a.collapse(!0);var e=document.createElement("div");e.innerHTML="<br>",a.insertNode(e),t.removeAllRanges(),t.addRange(a)}},500)}}},l.insertFacebook=function(){var t,a;t=window.getSelection();var n=window.prompt("Enter facebook Url");if(""!==n&&null!==n&&t.getRangeAt&&t.rangeCount){a=t.getRangeAt(0);var l=document.createElement("div");l.setAttribute("data-link",n),l.classList.add("facebook_embed_wrapper"),l.innerHTML='<div class="fb-post" data-href="'+n+'"></div>',a.insertNode(l),l.parentNode.contentEditable="false",e(function(){if(window.FB.XFBML.parse(),l){a=a.cloneRange(),a.setStartAfter(l.parentNode),a.collapse(!0);var e=document.createElement("div");e.innerHTML="<br>",a.insertNode(e),t.removeAllRanges(),t.addRange(a)}},100)}},l.format("enableobjectresizing",!0),l.format("styleWithCSS",!0)}return{template:'<div><div class="wysiwyg-menu"></div><div id="{{textareaId}}" contentEditable="{{!disabled}}" class="{{textareaClass}} wysiwyg-textarea" rows="{{textareaRows}}" name="{{textareaName}}" required="{{textareaRequired}}" placeholder="{{textareaPlaceholder}}" ng-model="value"></div></div>',restrict:"E",scope:{value:"=ngModel",textareaName:"@textareaName",textareaClass:"@textareaClass",textareaRequired:"@textareaRequired",textareaId:"@textareaId",textareaMenu:"=textareaMenu",textareaCustomMenu:"=textareaCustomMenu",fn:"&",disabled:"=?disabled"},replace:!0,require:"ngModel",link:l,transclude:!0}})}(),function(){"use strict";var e=[["bold","italic","underline","strikethrough","subscript","superscript"],["format-block"],["font"],["font-size"],["font-color","hilite-color"],["remove-format"],["ordered-list","unordered-list","outdent","indent"],["left-justify","center-justify","right-justify"],["code","quote","paragraph"],["link","image"],["instagram","twitter","youtube"]];angular.module("wysiwyg.module").factory("wysiwgGui",function(t){function a(e){var t;if(e.tag)t=document.createElement(e.tag);else{if(!e.text)return console.log("cannot create this element."),t=document.createElement("span");t=document.createElement("span")}if(e.text&&document.all?t.innerText=e.text:e.text&&(t.textContent=e.text),e.classes&&(t.className=e.classes),e.html&&(t.innerHTML=e.html),e.attributes&&e.attributes.length)for(var n in e.attributes){var l=e.attributes[n];l.name&&l.value&&t.setAttribute(l.name,l.value)}if(e.data&&e.data.length)for(var i in e.data)t.appendChild(a(e.data[i]));return t}var n=t,l={},i=function(e){l=e},s=function(){return{tag:"div",classes:"btn-group btn-group-sm wysiwyg-btn-group-margin"}},r=function(e){return n[e]||{}},u=function(t){angular.extend(n,l),t=angular.isDefined(t)&&""!==t?t:e;for(var i,u=document.createElement("div"),o=0;o<t.length;o++){for(var c=a(s()),m=0;m<t[o].length;m++)"link"===t[o][m]&&(i=a(r("unlink")),c.appendChild(i)),i=a(r(t[o][m])),c.appendChild(i);u.appendChild(c)}return u};return{createMenu:u,setCustomElements:i}})}(),function(){"use strict";angular.module("wysiwyg.module").value("wysiwgGuiElements",{bold:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Bold"},{name:"ng-click",value:"format('bold')"},{name:"ng-class",value:"{ active: isBold }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-bold"}]},italic:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Italic"},{name:"ng-click",value:"format('italic')"},{name:"ng-class",value:"{ active: isItalic }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-italic"}]},underline:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Underline"},{name:"ng-click",value:"format('underline')"},{name:"ng-class",value:"{ active: isUnderlined }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-underline"}]},strikethrough:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Strikethrough"},{name:"ng-click",value:"format('strikethrough')"},{name:"ng-class",value:"{ active: isStrikethrough }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-strikethrough"}]},subscript:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Subscript"},{name:"ng-click",value:"format('subscript')"},{name:"ng-class",value:"{ active: isSubscript }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-subscript"}]},superscript:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Superscript"},{name:"ng-click",value:"format('superscript')"},{name:"ng-class",value:"{ active: isSuperscript }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-superscript"}]},"remove-format":{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Remove Formatting"},{name:"ng-click",value:"format('removeFormat')"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-eraser"}]},"ordered-list":{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Ordered List"},{name:"ng-click",value:"format('insertorderedlist')"},{name:"ng-class",value:"{ active: isOrderedList }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-list-ol"}]},"unordered-list":{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Unordered List"},{name:"ng-click",value:"format('insertunorderedlist')"},{name:"ng-class",value:"{ active: isUnorderedList }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-list-ul"}]},outdent:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Outdent"},{name:"ng-click",value:"format('outdent')"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-outdent"}]},indent:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Indent"},{name:"ng-click",value:"format('indent')"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-indent"}]},"left-justify":{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Left Justify"},{name:"ng-click",value:"format('justifyleft')"},{name:"ng-class",value:"{ active: isLeftJustified }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-align-left"}]},"center-justify":{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Center Justify"},{name:"ng-click",value:"format('justifycenter')"},{name:"ng-class",value:"{ active: isCenterJustified }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-align-center"}]},"right-justify":{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Right Justify"},{name:"ng-click",value:"format('justifyright')"},{name:"ng-class",value:"{ active: isRightJustified }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-align-right"}]},code:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Code"},{name:"ng-click",value:"format('formatblock', 'pre')"},{name:"ng-class",value:"{ active: isPre }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-code"}]},quote:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Quote"},{name:"ng-click",value:"format('formatblock', 'blockquote')"},{name:"ng-class",value:"{ active: isBlockquote }"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-quote-right"}]},paragraph:{tag:"button",classes:"btn btn-default",text:"P",attributes:[{name:"title",value:"Paragragh"},{name:"ng-click",value:"format('insertParagraph')"},{name:"ng-class",value:"{ active: isParagraph }"},{name:"type",value:"button"}]},image:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Image"},{name:"ng-click",value:"insertImage()"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-picture-o"}]},"font-color":{tag:"button",classes:"btn btn-default wysiwyg-colorpicker wysiwyg-fontcolor",text:"A",attributes:[{name:"title",value:"Font Color"},{name:"colorpicker",value:"rgba"},{name:"colorpicker-position",value:"top"},{name:"ng-model",value:"fontColor"},{name:"ng-change",value:"setFontColor()"},{name:"type",value:"button"}]},"hilite-color":{tag:"button",classes:"btn btn-default wysiwyg-colorpicker wysiwyg-fontcolor",text:"H",attributes:[{name:"title",value:"Hilite Color"},{name:"colorpicker",value:"rgba"},{name:"colorpicker-position",value:"top"},{name:"ng-model",value:"hiliteColor"},{name:"ng-change",value:"setHiliteColor()"},{name:"type",value:"button"}]},font:{tag:"select",classes:"form-control wysiwyg-select",attributes:[{name:"title",value:"Image"},{name:"ng-model",value:"font"},{name:"ng-options",value:"f for f in fonts"},{name:"ng-change",value:"setFont()"}]},images:{tag:"input",classes:"images-upload-file",attributes:[{name:"title",value:""},{name:"type",value:"file"},{name:"id",value:"imagesInput"}],data:[{tag:"i",classes:"fa fa-picture-o"}]},"font-size":{tag:"select",classes:"form-control wysiwyg-select",attributes:[{name:"title",value:"Image"},{name:"ng-model",value:"fontSize"},{name:"ng-options",value:"f.size for f in fontSizes"},{name:"ng-change",value:"setFontSize()"}]},"format-block":{tag:"select",classes:"form-control wysiwyg-select",attributes:[{name:"title",value:"Format Block"},{name:"ng-model",value:"formatBlock"},{name:"ng-options",value:"f.name for f in formatBlocks"},{name:"ng-change",value:"setFormatBlock()"}]},link:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Link"},{name:"ng-click",value:"createLink()"},{name:"ng-show",value:"!isLink"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-link"}]},unlink:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Unlink"},{name:"ng-click",value:"format('unlink')"},{name:"ng-show",value:"isLink"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-unlink"}]},instagram:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Instagram"},{name:"ng-click",value:"insertInstagram()"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-instagram"}]},twitter:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Twitter"},{name:"ng-click",value:"insertTwitter()"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-twitter"}]},youtube:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Youtube"},{name:"ng-click",value:"insertYoutube()"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-youtube"}]},facebook:{tag:"button",classes:"btn btn-default",attributes:[{name:"title",value:"Facebook"},{name:"ng-click",value:"insertFacebook()"},{name:"type",value:"button"}],data:[{tag:"i",classes:"fa fa-facebook"}]}})}();